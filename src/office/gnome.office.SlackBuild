#!/bin/sh

. ../GSB.options

TMP=${TMP:-/tmp}

if [ ! -d $TMP ]; then
  mkdir -p $TMP # location to build the source
fi


# mergeant not included yet
# glom taken out, depends on packages in gnome 2.11.x
BUILD_ORDER="
abiword
dia
gnumeric
planner
mergeant
glom
gnucash
"

mkdir -p $TMP/gnome-$GVERSION/extras/office

(

for i in libs
do
(
  cd $i
  echo ""
  echo "*************************************************"
  echo "*****   Building $i"
  echo "*************************************************"
  echo ""
  ./gnome.office.$i.SlackBuild
)
done

for i in $BUILD_ORDER
do
(
  cd $i
  echo ""
  echo "*************************************************"
  echo "*****   Building $i"
  echo "*************************************************"
  echo ""
  ./$i.SlackBuild --cleanup
  upgradepkg --install-new $TMP/$i*.tgz
  mv $TMP/$i*.tgz $TMP/gnome-$GVERSION/extras/office
)
done
# Fork screen output to a log
) 2>&1 | tee $TMP/gnome.office.build.log

