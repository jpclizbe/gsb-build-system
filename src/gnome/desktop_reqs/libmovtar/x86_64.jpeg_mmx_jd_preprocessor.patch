diff -Naur jpeg-mmx-0.1.5.orig/jcdctmgr.c jpeg-mmx-0.1.5/jcdctmgr.c
--- jpeg-mmx-0.1.5.orig/jcdctmgr.c	2004-02-03 16:49:23.000000000 -0500
+++ jpeg-mmx-0.1.5/jcdctmgr.c	2005-08-12 17:06:08.000000000 -0400
@@ -18,6 +18,10 @@
 #include "cpu_accel.h"
 #include "mmx.h"
 
+#ifndef SIMD_ALIGN
+  #define SIMD_ALIGN 16
+#endif
+
 /* Private subobject for this module */
 
 typedef enum 
diff -Naur jpeg-mmx-0.1.5.orig/jdcolor.c jpeg-mmx-0.1.5/jdcolor.c
--- jpeg-mmx-0.1.5.orig/jdcolor.c	2004-02-03 16:49:23.000000000 -0500
+++ jpeg-mmx-0.1.5/jdcolor.c	2005-08-12 17:06:25.000000000 -0400
@@ -351,7 +351,6 @@
 	  :"=m"(outptr[0])
 	  :"m"(inptr0),"m"(inptr1),"m"(inptr2) //y cb cr
 	  :"eax", "ebx", "ecx", "st");
-#endif
 
       outptr+=12;
       inptr0+=4;
@@ -360,6 +359,7 @@
     }
   }
 }
+#endif
 
 #if defined(HAVE_MMX_INTEL_MNEMONICS) || defined(HAVE_MMX_ATT_MNEMONICS)
 METHODDEF(void)
@@ -624,7 +624,7 @@
 	  build_ycc_rgb_table(cinfo);
 	}
 #else
-      cconvert->pub.color_convert = ycc_rgb_convert_orig;
+      cconvert->pub.color_convert = ycc_rgb_convert;
 #endif
 
     } else if (cinfo->jpeg_color_space == JCS_GRAYSCALE) {
