diff -ur metacity-2.10.1-orig/src/display.c metacity-2.10.1/src/display.c
--- metacity-2.10.1-orig/src/display.c	2005-03-17 00:59:58.000000000 +0100
+++ metacity-2.10.1/src/display.c	2005-06-06 07:33:17.000000000 +0200
@@ -1639,8 +1639,10 @@
                    * in click to focus mode? The debate rages.
                    * Feel free to change TRUE to FALSE or vice versa
                    */
-                  if (TRUE /* meta_prefs_get_focus_mode () == META_FOCUS_MODE_CLICK */) 
-                    meta_window_raise (window);
+                  /* if (TRUE /* meta_prefs_get_focus_mode () == META_FOCUS_MODE_CLICK ) */
+		  /* Kbyte Fix, raise on clicking depends by an metacity option */
+		  if(meta_prefs_get_raise_on_click ())
+		    meta_window_raise (window);
                   else
                     meta_topic (META_DEBUG_FOCUS,
                                 "Not raising window on click due to mouse/sloppy focus mode\n");
diff -ur metacity-2.10.1-orig/src/metacity.schemas.in metacity-2.10.1/src/metacity.schemas.in
--- metacity-2.10.1-orig/src/metacity.schemas.in	2005-06-06 06:43:18.000000000 +0200
+++ metacity-2.10.1/src/metacity.schemas.in	2005-06-06 07:25:36.000000000 +0200
@@ -95,6 +95,20 @@
     </schema>
 
     <schema>
+      <key>/schemas/apps/metacity/general/raise_on_click</key>
+      <applyto>/apps/metacity/general/raise_on_click</applyto>
+      <owner>metacity</owner>
+      <type>bool</type>
+      <default>false</default>
+      <locale name="C">
+         <short>Raise current window if click event occurs</short>
+         <long>
+          If true the focused window will be automatically raised.
+         </long>
+      </locale>
+    </schema>
+
+    <schema>
       <key>/schemas/apps/metacity/general/auto_raise_delay</key>
       <applyto>/apps/metacity/general/auto_raise_delay</applyto>
       <owner>metacity</owner>
diff -ur metacity-2.10.1-orig/src/prefs.c metacity-2.10.1/src/prefs.c
--- metacity-2.10.1-orig/src/prefs.c	2005-06-06 06:43:18.000000000 +0200
+++ metacity-2.10.1/src/prefs.c	2005-06-06 07:43:34.000000000 +0200
@@ -53,6 +53,7 @@
 #define KEY_DISABLE_WORKAROUNDS "/apps/metacity/general/disable_workarounds"
 #define KEY_BUTTON_LAYOUT "/apps/metacity/general/button_layout"
 #define KEY_REDUCED_RESOURCES "/apps/metacity/general/reduced_resources"
+#define KEY_RAISE_ON_CLICK "/apps/metacity/general/raise_on_click"
 #define KEY_GNOME_ACCESSIBILITY "/desktop/gnome/interface/accessibility"
 
 #define KEY_COMMAND_PREFIX "/apps/metacity/keybinding_commands/command_"
@@ -91,6 +92,7 @@
 static gboolean provide_visual_bell = TRUE;
 static gboolean bell_is_audible = TRUE;
 static gboolean reduced_resources = FALSE;
+static gboolean raise_on_click = FALSE;
 static gboolean gnome_accessibility = FALSE;
 
 static MetaVisualBellType visual_bell_type = META_VISUAL_BELL_INVALID;
@@ -131,6 +133,7 @@
 static gboolean update_action_double_click_titlebar (const char *value);
 static gboolean update_auto_raise          (gboolean   value);
 static gboolean update_auto_raise_delay    (int        value);
+static gboolean update_raise_on_click     (gboolean    value);
 static gboolean update_button_layout      (const char *value);
 static gboolean update_window_binding     (const char *name,
                                            const char *value);
@@ -361,6 +364,11 @@
   update_auto_raise_delay (int_val);
   
 
+  bool_val = gconf_client_get_bool (default_client, KEY_RAISE_ON_CLICK,
+                 &err);
+  cleanup_error (&err);
+  update_raise_on_click (bool_val);                 
+  
   str_val = gconf_client_get_string (default_client, KEY_THEME,
                                      &err);
   cleanup_error (&err);
@@ -729,6 +737,22 @@
         queue_changed (META_PREF_AUTO_RAISE_DELAY);
     
     }
+  else if (strcmp (key, KEY_RAISE_ON_CLICK) == 0)
+    {
+      gboolean b;
+
+      if (value && value->type != GCONF_VALUE_BOOL)
+        {
+          meta_warning (_("GConf key \"%s\" is set to an invalid type\n"),
+                        KEY_RAISE_ON_CLICK);
+          goto out;
+        }
+
+      b = value ? gconf_value_get_bool (value) : raise_on_click;
+
+      if (update_raise_on_click (b))
+        queue_changed (META_PREF_RAISE_ON_CLICK);
+    }    
   else if (str_has_prefix (key, KEY_COMMAND_PREFIX))
     {
       const char *str;
@@ -1406,6 +1430,16 @@
   return old != auto_raise;
 }
 
+static gboolean
+update_raise_on_click (gboolean value)
+{
+  gboolean old = raise_on_click;
+
+  raise_on_click = value;
+
+  return old != raise_on_click;
+}
+
 #define MAX_REASONABLE_AUTO_RAISE_DELAY 10000
   
 static gboolean
@@ -1489,6 +1523,9 @@
     case META_PREF_AUTO_RAISE:
       return "AUTO_RAISE";
       
+    case META_PREF_RAISE_ON_CLICK:
+      return "RAISE_ON_CLICK";
+      
     case META_PREF_AUTO_RAISE_DELAY:
       return "AUTO_RAISE_DELAY";
 
@@ -2225,6 +2262,12 @@
   return auto_raise;
 }
 
+gboolean
+meta_prefs_get_raise_on_click ()
+{
+	return raise_on_click;
+}
+
 int
 meta_prefs_get_auto_raise_delay (void)
 {
diff -ur metacity-2.10.1-orig/src/prefs.h metacity-2.10.1/src/prefs.h
--- metacity-2.10.1-orig/src/prefs.h	2005-06-06 06:43:18.000000000 +0200
+++ metacity-2.10.1/src/prefs.h	2005-06-06 07:35:50.000000000 +0200
@@ -49,6 +49,7 @@
   META_PREF_AUDIBLE_BELL,
   META_PREF_VISUAL_BELL_TYPE,
   META_PREF_REDUCED_RESOURCES,
+  META_PREF_RAISE_ON_CLICK,
   META_PREF_GNOME_ACCESSIBILITY
 } MetaPreference;
 
@@ -75,6 +76,7 @@
 gboolean                    meta_prefs_get_auto_raise         (void);
 int                         meta_prefs_get_auto_raise_delay   (void);
 gboolean                    meta_prefs_get_reduced_resources  (void);
+gboolean                    meta_prefs_get_raise_on_click     (void);
 gboolean                    meta_prefs_get_gnome_accessibility (void);
 
 const char*                 meta_prefs_get_command            (int i);

